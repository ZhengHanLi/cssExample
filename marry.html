<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        .wrap{
            max-width: 500px;
            /* background-color: #ffd; */
        }

        .page{
            width: 100vw;
            height: 100vh;
            /* margin: auto; */
            position: relative;
        }

        .page .header{
            letter-spacing: 1em;
            margin-bottom: 2em;
        }

        .page .weddingPerson
        {
            position: absolute;
            font-size: 14px;
            letter-spacing: .5em;
            width: 1em;
            right: 2em;
            top: 3em;
            animation-name: oxxo;
            animation-duration:4s;
        }


        @keyframes oxxo{
            from{
                right:-1em;
            }
            to{
                right:2em;
            }
        }

        .banner{
            width: 90%;
            height: 34vh;
            /* background-color: #0f0; */
            margin: auto;
        }

        .banner::before{
            content: "2022";
            font-size: 10px;
        }

        .banner .weddingDate{
            width: 35%;
            height: 65%;
            font-size: 24px;
            color: #fff;
            background-color: rgb(139, 136, 136);
        }

        .banner .weddingDate .pic{
            margin-left: 15px;
            width: 80vw;
            position: relative;
        }

        .banner .weddingDate .pic img{
            /* z-index: 1; */
            width: 100%;
            /* height: 210px; */
        }

        .banner .weddingDate .pic p{
            color: #fff;
            font-size: 30px;
            position: absolute;
            right: 0;
            bottom: -10px;
        }

        .banner .weddingDate .pic p::after{
            content: 'invitation';
            color:rgb(190, 195, 199);
            font-size: 16px;
            display: block;
            margin-top: -10px;
            margin-left:5em ;
        }

        .centerImg {
            width: 90%;
            height: 25vh;
            margin: auto;
            padding-top: 50px;
            /* background-color: #ddd; */
        }

        .centerImg .circle{
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 1px solid #ccc;
            margin: auto;
            /* background-color: #ccc; */
        }
        .centerImg .circle{
            color: #ccc;
            line-height: 120px;
            text-align: center;
        }

        .content{
            width: 90%;
            margin: auto;
        }

        .content p{
            color: #ccc;
            text-align: center;
        }
    </style>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js' integrity='sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==' crossorigin='anonymous'></script>
    <script>
        const $body = (window.opera) ? (document.compatMode == "CSS1Compat" ? $('html') : $('body')) : $('html,body');
        var $section;
        var numOfPages, // 取得section
        curPage = 0, //起始頁
        scrollLock = false; //滾動開關
        var startx,starty,endx,endy;

        // document.addEventListener("touchstart",function(e){
        //     startx=e.touches[0].pageX;
        //     starty=e.touches[0].pageY;
        // },false)

        // document.addEventListener("touchend",function(e){
        //     endx=e.changeTouches[0].pageX;
        //     endy=e.changeTouches[0].pageY;
        //     alert("xxxxx")
        //     let changey=endy-starty
        //     if( changey<=-50 )
        //         navigateUp();
        //     else
        //         navigateDown();
        // },false)
                
        let lastKnownScrollPosition = 0;
        var lastScrollTop = 0;
        function doSomething(scrollPos) {
        // 依據捲動位置進行某些操作
            if (scrollPos > lastScrollTop){
                // downscroll code
                navigateDown();
            } else {
                // upscroll code
                navigateUp();
            }
            lastScrollTop = scrollPos <= 0 ? 0 : scrollPos; // For Mobile or negative scrolling
        }

        document.addEventListener('scroll', function(e) {
            lastKnownScrollPosition = window.scrollY;

            if (!scrollLock) {
                window.requestAnimationFrame(function() {
                    console.log(lastKnownScrollPosition )
                    doSomething(lastKnownScrollPosition);
                    
                });

            }
            else
                event.preventDefault();
        });


        // var lastScrollTop = 0;
        // document.addEventListener("scroll", function(){ // or window.addEventListener("scroll"....
        //     var st = window.pageYOffset || document.documentElement.scrollTop; // Credits: "https://github.com/qeremy/so/blob/master/so.dom.js#L426"
        //     if (st > lastScrollTop){
        //         // downscroll code
        //         navigateDown();
        //     } else {
        //         // upscroll code
        //         navigateUp();
        //     }
        //     lastScrollTop = st <= 0 ? 0 : st; // For Mobile or negative scrolling
        // }, false);

        window.onload=function()
        {
            $section = $('.page');
            numOfPages = $section.length - 1 // 取得section
        }



function scrollPage() {
//滑鼠滾動
// $(document).on("mousewheel DOMMouseScroll", function(e) {
//     if (scrollLock) return;
//     if (e.originalEvent.wheelDelta > 0 || e.originalEvent.detail < 0)
//     navigateUp();
//     else
//     navigateDown();
// });
// //鍵盤上下鍵
// $(document).on("keydown", function(e) {
//     if (scrollLock) return;
//     if (e.which === 38)
//     navigateUp();
//     else if (e.which === 40)
//     navigateDown();
// });
}

// 上滾動
function navigateUp () {
  if (curPage === 0) return;
  curPage--;
  pagination();
};
// 下滾動
function navigateDown() {
  if (curPage === numOfPages) return;
  curPage++;
  pagination();
};
// 滾動至上/下區塊
function pagination() {
  scrollLock = true;
  document.querySelector(".page .weddingPerson").style.animation="none"
  if( curPage==0 )
  {
    document.querySelector(".page .weddingPerson").style.animation = "oxxo 4s"
  }
  else if( curPage==2 )
  {

  }
  $body.stop().animate({
    scrollTop: $section.eq(curPage).offset().top
  }, 1000, 'swing', function(){
    setTimeout(function(){scrollLock = false;},500) 
  });
};

$(function() {
  scrollPage();
});
    </script>
</head>
<body>
    <div class="wrap">
        <div class="page">
            <div class="weddingPerson">
                羅秉鏞 ＆ 李宛芯
            </div>

            <div class="header">有你的地方就是幸福</div>
            <div class="banner">
                <div class="weddingDate">
                    Dec. 03
                    <div class="pic">
                        <img src="img/m1.jpeg">
                        <p>WEDDING</p>
                    </div>
                </div>

            </div>
            <div class="centerImg">
                <div class="circle">
                    <p>終於等到你</p>
                </div>
            </div>
            <div class="content">
                <p>
                    2022 / 12 / 03 18:00
                </p>
                <p>
                    阿沐婚宴會館
                </p>
                <p>
                    桃園市平鎮區 ...
                </p>
            </div>
        </div>
        <div class="page">
            page 2
        </div>
        <div class="page">
            page 3
            <form action="">
                <h1>WELCOME</h1>
                <div class="name">
                    <div class="title">您的姓名</div>
                    <div class="content">
                        <input type="text">
                    </div>
                </div>
                <div class="attention">
                    <div class="title">是否赴宴?</div>
                    <div class="content">
                        <input type="radio" name="attention" id="" checked>非常樂意
                        <input type="radio" name="attention" id="">尚未決定
                        <input type="radio" name="attention" id="">無法參加
                    </div>
                </div>
                <div class="letter">
                    <div class="title">需要寄送喜帖嗎？</div>
                    <div class="content">
                        <input type="radio" name="letter" id="" checked>需要
                        <input type="radio" name="letter" id="">不需要
                    </div>
                </div>
                <div class="memo">
                    <div class="title">給新人的祝福</div>
                    <div class="content">
                        <textarea name="" id="" cols="30" rows="10"></textarea>
                    </div>
                </div>
                <input type="submit" value="確定送出">
            </form>
        </div>
    </div>

    <script type="module">
        // https://firebase.google.com/docs/firestore/quickstart
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.8/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs   } from "https://www.gstatic.com/firebasejs/9.6.8/firebase-firestore.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyBfhCQUvp4L7Jp2YrNuKF4Xl8eaCJtM-PU",
          authDomain: "orangemarry-4f939.firebaseapp.com",
          databaseURL: "https://orangemarry-4f939-default-rtdb.firebaseio.com",
          projectId: "orangemarry-4f939",
          storageBucket: "orangemarry-4f939.appspot.com",
          messagingSenderId: "964771691091",
          appId: "1:964771691091:web:9a1634d746688de51c24a6",
          measurementId: "G-B2WF4192QG"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore();

        try {
            // const docRef = await addDoc11(collection(db, "attend"), {
            //     name: "政翰",
            //     attend: "出席",
            //     big:1,
            //     small:2,
            //     vegetarian:0,
            //     letter:"需要",
            //     addres:"桃園市"
            // });
            // console.log("Document written with ID: ", docRef.id);
        } catch (e) {
        alert("儲存發生問題 請聯絡09xxxxxx")
        }

        // const querySnapshot = await getDocs(collection(db, "users"));
        // console.log(querySnapshot )
        // querySnapshot.forEach((doc) => {
        // console.log(`${doc.id} => ${doc.data()}`);
        // });
      </script>
</body>
</html>