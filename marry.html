<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>羅秉鏞與李宛芯的婚禮</title>

    <style>
        body{
            /* background-color: rgb(75, 70, 70); */
        }

        .wrap{
            /* width: 64.8vh; */
            width: 100%;
            max-width: 64.8vh;
            /* background-color: #fff; */
            margin: auto;
            height: 90vh;
            scroll-snap-type: y mandatory;
            overflow-y: scroll;
            overflow-x: hidden;
        }

        .tag{
            display: none;
        }
        .page{
            width: 100%;
            height: 90vh;
            /* margin: auto; */
            position: relative;
            scroll-snap-align: start;
            scroll-snap-stop: always;
        }
        .space{
            width: 100%;
            height: 50vh;
            /* background-color: #000; */
        }

        .page1 .header{
            letter-spacing: 1em;
            margin-bottom: 2em;
        }

        .page1 .weddingPerson
        {
            position: absolute;
            font-size: 14px;
            letter-spacing: .5em;
            width: 1em;
            right: 2em;
            top: 3em;
            z-index: 2;
        }

        .page1 .weddingPerson.active
        {
            animation: oxxo 4s;
        }


        @keyframes oxxo{
            from{
                right:-1em;
            }
            to{
                right:2em;
            }
        }

        .page1 .banner{
            width: 90%;
            height: 34vh;
            /* background-color: #0f0; */
            margin: 5em auto 0 ;
            position: relative;
        }

        .page1 .banner::before{
            content: "2022";
            font-size: 10px;
            position: absolute;
            top: -4em;
            left: 1em;
        }

        .page1 .banner .pic{
            margin-left: 15px;
            width: 95%;
            height: 200px;
            position: relative;
            background-image: url("img/m1.jpeg");
            background-size: cover;
        }

        .page1 .banner .pic::before{
            content: 'Dec. 03';
            font-size: 21px;
            padding: 0 10px;
            width: 26%;
            height: 45%;
            background-color: rgb(83, 81, 81,.3);
            display: block;
            position: absolute;
            top: -1.2em;
            left: -.5em;
            z-index: -1;
        }

        .page1 .banner .pic img{
            width: 70% ;
        }

        .page1 .banner .pic p{
            color: #fff;
            font-size: 30px;
            position: absolute;
            right: 1em;
            bottom: -10px;
        }

        .page1 .banner .pic p::after{
            content: 'invitation';
            color:rgb(190, 195, 199);
            font-size: 16px;
            display: block;
            margin-top: -10px;
            margin-left:5em ;
        }

        .page1 .centerImg {
            width: 90%;
            height: 25vh;
            margin: auto;
            margin-top: -2em;
            /* padding-top: 10px; */
        }

        .page1 .centerImg .circle{
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 1px solid #ccc;
            margin: auto;
        }
        .page1 .centerImg .circle{
            color: #ccc;
            line-height: 120px;
            text-align: center;
        }

        .page1 .content{
            width: 90%;
            margin: auto;
        }

        .page1 .content p{
            color: #ccc;
            text-align: center;
        }


        .page2 .header{
            padding-top: 2em;
            letter-spacing: 1em;
            /* margin-top: 3em; */
        }

        .page2 .side-txt,
        .page3 .side-txt{
            position: fixed;
            width: 1.5em;
            /* letter-spacing: 2em; */
            line-height: 2em;
            top: 5em;
            right: 1em;
            /* animation: side-animation 2s; */
            display: none;
        }

        .page2 .side-txt.active,
        .page3 .side-txt.active{
            animation: side-animation 2s;
            display: block;
        }

        @keyframes side-animation{
            from{
                top:1em;
            }
            to{
                top:5em;
            }
        }

        .page2 .banner {
 
        }

        .page2 .banner img{
            width: 95%;
            margin: 10px 10px ;
        }

        .page2 .banner .txt{
            text-align: center;
        }

        .page2 .footer{
            width: 90%;
            margin: auto;
            margin-top: 4em;

            display: flex;

        }

        .page2 .footer img{
            /* width: 30%; */
            height: 10vh;
        }   
        .page2 .footer .txt p{
            font-size: 12px;
            line-height: 0.5em;
            margin-left: 1em;
        }   

        .page3 .banner{
            display: flex;
        }

        .page3 .banner img{
            width: 75%;
            height: 75%;
        }

        .page3 .banner .txt {
            /* text-align: left; */
            display: flex;
            flex-direction: row-reverse;
            justify-content: flex-end;
        }

        .page3 .banner .txt p{
            -webkit-writing-mode: vertical-rl;
            writing-mode: vertical-rl;
            /* padding: 0; */
            margin: 0;
        }

        .page3 .footer .txt p{
            margin: 0;
        }

        .page4{
            display: flex;
            justify-content: center;
        }
        .page4 .userinfo{
            width: 90%;
            height: 80vh;
            background-color: rgba(207, 204, 204, 0.3);
        }

        .page4 .userinfo h1{
            margin: 0 0 .5em;
            text-align: center;
        }

        .page4 .userinfo > div{
            margin: 0 0 20px;
        }

        .page4 .letter .address{
            display: none;
        }
        .page4 .letter .address input{
           width: 90%;
           margin-left: 2px;
           border-radius: 5px;
        }

        .senddiv{
            width: 100%;
            display: flex;
            justify-content: center;
        }
        #send{
            background-color: rgb(222, 223, 213);
            padding: 10px;
            border-radius: 10px;
            font-family: serif;
            font-weight: 800;
            font-size: 16px;
        }
    </style>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js' integrity='sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==' crossorigin='anonymous'></script>

</head>
<body>
    <div class="wrap">
        <div class="page page1">
            <h2 class="tag">page1</h2>
            <div class="weddingPerson">
                羅秉鏞 ＆ 李宛芯
            </div>

            <div class="header">有你的地方就是幸福</div>
            <div class="banner">
                <div class="pic">
                    <!-- <img src="img/m1.jpeg"> -->
                    <p>WEDDING</p>
                </div>
            </div>
            <div class="centerImg">
                <div class="circle">
                    <p>終於等到你</p>
                </div>
            </div>
            <div class="content">
                <p>
                    2022 / 12 / 03 18:00
                </p>
                <p>
                    阿沐婚宴會館
                </p>
                <p>
                    桃園市平鎮區 ...
                </p>
            </div>
        </div>
        <div class="space">

        </div>
        <div class="page page2">
            <h2 class="tag">page2</h2>
            <div class="header">有你的地方就是幸福</div>
            <div class="side-txt">
                終於等到你
            </div>
            <div class="banner">
                <img src="img/m2.jpeg" alt="">
                <div class="txt">
                    <p>Live,Love,Laught and be Happy</p>
                    <p>生活在笑、愛與幸福中</p>
                </div>
            </div>

            <div class="footer">
                <img src="img/m3.jpeg" alt="">
                <div class="txt">
                    <p>還好我沒有放棄</p>
                    <p>讓我等到陪我共度一生醫生的你</p>
                    <p>只要你在我身邊，那就是幸福</p>
                </div>
            </div>
        </div>
        <div class="space">

        </div>
        <div class="page page3">
            <h2 class="tag">page3</h2>
            <div class="side-txt">
                終於等到你
            </div>
            <div class="banner">
                <img src="img/m04.jpg" alt="">
                <div class="txt">
                    <p>我因為有妳而幸福</p>
                    <p>真幸運，能在這個世界找到妳！</p>
                    <p>I'm always by your side</p>
                </div>
            </div>

            <div class="footer">
                <div class="txt">
                    <p>還好我沒有放棄</p>
                    <p>讓我等到陪我共度一生醫生的你</p>
                    <p>只要你在我身邊，那就是幸福</p>
                </div>
            </div>
        </div>
        <div class="space">
            
        </div>
        <div class="page page4">
            <h2 class="tag">page4</h2>
            <div class="userinfo">   
                <h1>WELCOME</h1>
                <div class="name">
                    <div class="title">您的姓名</div>
                    <div class="content">
                        <input type="text">
                    </div>
                </div>
                <div class="attention">
                    <div class="title">是否赴宴?</div>
                    <div class="content">
                        <input type="radio" name="attention" id="" value="非常樂意" checked>非常樂意
                        <div class="peopleNum">
                            大人
                            <select name="man" id="">
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                            </select>位，
                            小孩
                            <select name="child" id="">
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                            </select>位，
                            茹素
                            <select name="vage" id="">
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                            </select>位
                        </div><br>
                        <input type="radio" name="attention" id="" value="尚未決定">尚未決定<br>
                        <input type="radio" name="attention" id="" value="無法參加">無法參加<br>
                    </div>
                </div>
                <div class="letter">
                    <div class="title">需要寄送喜帖嗎？</div>
                    <div class="content">
                        <input type="radio" name="letter" id="" value="不需要" checked>不需要
                        <input type="radio" name="letter" id="" value="需要" >需要
                        <div class="address">
                            <input type="text">
                        </div>
                    </div>
                </div>
                <div class="memo">
                    <div class="title">給新人的祝福</div>
                    <div class="content">
                        <textarea name="" id="" cols="30" rows="10"></textarea>
                    </div>
                </div>
                <div class="senddiv">

                    <input type="button" value="確定送出" id="send">
                                        
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        // https://firebase.google.com/docs/firestore/quickstart
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.8/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs   } from "https://www.gstatic.com/firebasejs/9.6.8/firebase-firestore.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyBfhCQUvp4L7Jp2YrNuKF4Xl8eaCJtM-PU",
          authDomain: "orangemarry-4f939.firebaseapp.com",
          databaseURL: "https://orangemarry-4f939-default-rtdb.firebaseio.com",
          projectId: "orangemarry-4f939",
          storageBucket: "orangemarry-4f939.appspot.com",
          messagingSenderId: "964771691091",
          appId: "1:964771691091:web:9a1634d746688de51c24a6",
          measurementId: "G-B2WF4192QG"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore();

        document.getElementById("send").addEventListener('click',function(){
            var node= document.querySelector(".name input")
            var ds={'name':'','atten':'','man':'','child':'','vage':'','letter':'','address':'','memo':''}
            var msg="確認以下內容\r\n\r\n"
            if ( !node.value )
            {
                alert("請輸入大名！！")
                node.focus()
                return;
            }
            msg+="您的姓名: "+node.value +"\r\n"
            ds.name=node.value 
            console.log( node.value )

            var node= document.querySelector("input[name=attention]:checked")
            msg+="是否赴宴?: "+node.value +"\r\n"
            ds.atten=node.value
            console.log( node.value)
            if( node.value=='非常樂意' )
            {
                var flag=false;
                var nodes=document.querySelectorAll('.peopleNum select')
                for( node of nodes )
                {
                    ds[node.name]=node.value
                    if(node.value!='0' )
                        flag=true
                }

                if( !flag )
                {
                    alert("請選擇參加人數")
                    document.querySelectorAll('.peopleNum select')[0].focus()
                    return
                }
            }

            var node= document.querySelector("input[name=letter]:checked")
            msg+="需要寄送喜帖嗎?: "+node.value +"\r\n"
            ds.letter=node.value 
            console.log( node.value)
            if( node.value=='需要' )
            {
                var node=document.querySelector('.address input')

                if( !node.value )
                {
                    alert("請填寫喜帖寄送地址")
                    node.focus()
                    return
                }
                ds.address=node.value
                msg+="喜帖寄送地址: "+node.value +"\r\n"
            }

            var node= document.querySelector(".memo textarea")
            msg+="給新人的祝福?: "+node.value +"\r\n"
            ds.memo=node.value 
            console.log( node.value)

            if( confirm(msg) )
            {
                try {
                    const docRef = addDoc(collection(db, "attend"), ds);
                    // console.log("Document written with ID: ", docRef.id);
                    alert("儲存成功")
                    document.querySelector(".name input").value=''
                    document.querySelector(".memo textarea").value=''
                    document.querySelector('.address input').value=''
                } catch (e) {
                    console.log(e)
                    alert("儲存發生問題 請聯絡09xxxxxx")
                }
                //location.reload()
            }
        })
      </script>

<script>

        const observer = new IntersectionObserver(entries => {
        entries.forEach(elem => {
            // alert("cc")
            if (elem.isIntersecting) {
            const text = elem.target.querySelector('h2').innerText;
            console.log('Ping! Visible: ', text);
                // console.log(elem.target )     
                document.querySelector('.page1 .weddingPerson').classList.remove('active')   
                document.querySelector('.page2 .side-txt').classList.remove('active')
                document.querySelector('.page3 .side-txt').classList.remove('active')
                if(text=='page1')
                {
                    document.querySelector('.page1 .weddingPerson').classList.add('active')
                }
                if(text=='page2')
                {
                    document.querySelector('.page2 .side-txt').classList.add('active')
                }
                if(text=='page3')
                {
                    document.querySelector('.page3 .side-txt').classList.add('active')
                }  
            }
        });
        });

        document.querySelectorAll('.page').forEach(elem => observer.observe(elem))

        var nodes=document.querySelectorAll('.page4 .attention input[name=attention]')
        for( node of nodes ){
            node.addEventListener('change',function(e){
                document.querySelector('.peopleNum').style.display='none'
                if ( event.target.value=='非常樂意')
                    document.querySelector('.peopleNum').style.display='block'
                else if ( event.target.value=='尚未決定')
                ;
                else if ( event.target.value=='無法參加')
                ;
            })
        }

        var nodes=document.querySelectorAll('.page4 .letter input[name=letter]')
        for( node of nodes ){
            node.addEventListener('change',function(e){
                document.querySelector('.page4 .letter .address').style.display='none'
                if ( event.target.value=='需要')
                    document.querySelector('.page4 .letter .address').style.display='block'
                else if ( event.target.value=='不需要')
                ;

            })
        }
</script>
</body>
</html>